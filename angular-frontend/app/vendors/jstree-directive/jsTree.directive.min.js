var ngJSTree=angular.module("jsTree.directive",[]);ngJSTree.directive("jsTree",["$http",function(e){var t={restrict:"EA",fetchResource:function(t,n){return e.get(t).then(function(e){n&&n(e.data)})},managePlugins:function(e,n,r,c){if(r.treePlugins){if(c.plugins=r.treePlugins.split(","),c.core=c.core||{},c.core.check_callback=c.core.check_callback||!0,c.plugins.indexOf("state")>=0&&(c.state=c.state||{},c.state.key=r.treeStateKey),c.plugins.indexOf("search")>=0){var i=!1;"ng-tree-search"!==n.next().attr("class")&&n.after('<input type="text" placeholder="Search Tree" class="ng-tree-search"/>').next().on("keyup",function(e){i&&clearTimeout(i),i=setTimeout(function(){t.tree.jstree(!0).search(e.target.value)},250)})}c.plugins.indexOf("checkbox")>=0&&(c.checkbox=c.checkbox||{},c.checkbox.keep_selected_style=!1),c.plugins.indexOf("contextmenu")>=0&&r.treeContextmenu&&(c.contextmenu=c.contextmenu||{},void 0!=r.treeContextmenuaction?c.contextmenu.items=function(t){return e.$eval(r.treeContextmenuaction)(t)}:c.contextmenu.items=function(){return e[r.treeContextmenu]}),c.plugins.indexOf("types")>=0&&r.treeTypes&&(c.types=e[r.treeTypes],console.log(c)),c.plugins.indexOf("dnd")>=0&&r.treeDnd&&(c.dnd=e[r.treeDnd],console.log(c))}return c},manageEvents:function(e,n,r){if(r.treeEvents)for(var c=r.treeEvents.split(";"),i=0;i<c.length;i++)if(c[i].length>0){var a=c[i].split(":")[0];a.indexOf(".")<0&&(a+=".jstree");var o=c[i].split(":")[1];t.tree.on(a,e[o])}},link:function(e,n,r){$(function(){var c={};c.core={},r.treeCore&&(c.core=$.extend(c.core,e[r.treeCore])),r.treeData=r.treeData?r.treeData.toLowerCase():"",r.treeSrc=r.treeSrc?r.treeSrc.toLowerCase():"","html"==r.treeData?t.fetchResource(r.treeSrc,function(i){n.html(i),t.init(e,n,r,c)}):"json"==r.treeData?t.fetchResource(r.treeSrc,function(i){c.core.data=i,t.init(e,n,r,c)}):"scope"==r.treeData?(e.$watch(r.treeModel,function(i,a){i&&(c.core.data=e[r.treeModel],$(n).jstree("destroy"),t.init(e,n,r,c))},!0),c.core.data=e[r.treeModel],t.init(e,n,r,c)):r.treeAjax&&(c.core.data={url:r.treeAjax,data:function(e){return{id:"#"!=e.id?e.id:1}}},t.init(e,n,r,c))})},init:function(e,n,r,c){t.managePlugins(e,n,r,c),this.tree=$(n).jstree(c),t.manageEvents(e,n,r)}};return t}]);