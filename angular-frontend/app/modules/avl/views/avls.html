<div class="panel panel-default">
    <div class="panel-heading">
        <!--LABEL-->
        <ul class="nav navbar-nav">
            <li>
                <a class="navbar-brand" ui-sref="admin.avls">
                    <span class="text text-uppercase">{{$state.current.ncyBreadcrumb.label | translate}}</span>
                </a>
            </li>
        </ul>
        <form class="navbar-form navbar-right" role="search">
            <div class="form-group">
                <!--INPUT-->
                <input type="text" class="form-control search-header" size="35"
                       placeholder="{{'app.shared.admin.enterkeyword' | translate}}" ng-model="searchItem"/>
                <!--SUBMIT-->
                <button type="submit" ng-click="search(searchItem,perPage)"
                        class="btn btn-sm kid-search-button search-header-btn"><i
                        class="fa fa-search"></i></button>
            </div>
        </form>
    </div>
    <div class="floating" id="toggle">&mdash;</div>

    <div class="drag-me draggble-table collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
            <!--NOTIFICATION  notification-->
            <!--PROFILE-->
            <li class="dropdown">
                <a href="" class="pills-tables-btn text-uppercase" data-target="#"
                   data-toggle="dropdown">
                    <i class="fa fa-chevron-circle-down"></i>
                </a>
                <ul class="dropdown-menu multi-level" role="menu">
                    <li><a href="" data-target="#tab2default" data-toggle="tab">
                        <i class="fa fa-bus success"></i>
                        Vehicles
                    </a></li>
                    <li></li>
                    <li><a href="" data-target="#tab3default" data-toggle="tab">
                        <i class="fa fa-user success"></i>
                        Persons
                    </a>
                    </li>
                    <li></li>
                    <li class="active">
                        <a href="" data-target="#tab1default" _target="" data-toggle="tab">
                            <span class="fa fa-list"></span>
                            Charts
                        </a>
                    </li>
                    <li>
                        <a href="" data-target="#tab4default" _target="" data-toggle="tab">
                            <span class="badge badge-danger">4</span>
                            Events
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
        <div class="collapse in" id="collapseExample">
            <div class="col-xs-12">
                <div id="titr-content" class="col-md-12">
                    <h3></h3>
                </div>
                <div class="col-md-12 ">
                    <div class="panel with-nav-tabs panel-default">
                        <div class="panel-heading">
                            <div class="panel-title">
                                <div class="bars pull-right">
                                </div>
                            </div>
                        </div>
                        <div class="panel-body">
                            <div class="tab-content">
                                <div class="tab-pane in active" id="tab1default">Default 4</div>
                                <div scroll-glue class="tab-pane fade" id="tab2default">
                                    <table class="table table-striped table-hover ellipsis-table table-responsive">
                                        <thead class="thead-default">
                                        <tr>
                                            <!--Plate-->
                                            <th width="5%" class="text-uppercase">
                                                <a class="text text-primary" style="cursor:n-resize"
                                                   ng-click="sortType = 'plate'; sortReverse = !sortReverse">
                                                    {{"asset.table.plate" | translate}}
                                                    <span ng-show="sortType == 'plate' && !sortReverse"
                                                          class="fa fa-caret-down"></span>
                                                    <span ng-show="sortType == 'plate' && sortReverse"
                                                          class="fa fa-caret-up"></span>
                                                </a>
                                            </th>
                                            <!--Model-->
                                            <th width="5%" class="text-uppercase">
                                                <a class="text text-primary" style="cursor:n-resize"
                                                   ng-click="sortType = 'model'; sortReverse = !sortReverse">
                                                    {{"asset.table.model" | translate}}
                                                    <span ng-show="sortType == 'model' && !sortReverse"
                                                          class="fa fa-caret-down"></span>
                                                    <span ng-show="sortType == 'model' && sortReverse"
                                                          class="fa fa-caret-up"></span>
                                                </a>
                                            </th>
                                            <th width="10%" class="text-uppercase">
                                                <a class="text text-primary" style="cursor:n-resize"
                                                   ng-click="sortType = 'default_point_of_interest'; sortReverse = !sortReverse">
                                                    {{"app.shared.common.current_position" | translate}} <span
                                                        ng-show="sortType == 'default_point_of_interest' && !sortReverse"
                                                        class="fa fa-caret-down"></span>
                                                    <span ng-show="sortType == 'default_point_of_interest' && sortReverse"
                                                          class="fa fa-caret-up"></span>
                                                </a>
                                            </th>
                                            <!--Organization-->
                                            <th width="10%" class="">
                                                <a class="text text-primary text-uppercase" style="cursor:n-resize"
                                                   ng-click="sortType = 'organization'; sortReverse = !sortReverse">
                                                    {{"asset.table.organization" | translate}}
                                                    <span ng-show="sortType == 'organization' && !sortReverse"
                                                          class="fa fa-caret-down"></span>
                                                    <span ng-show="sortType == 'organization' && sortReverse"
                                                          class="fa fa-caret-up"></span>
                                                </a>
                                            </th>
                                            <!--Category-->
                                            <th width="7%" class="text-uppercase">
                                                <a class="text text-primary" style="cursor:n-resize"
                                                   ng-click="sortType = 'category'; sortReverse = !sortReverse">
                                                    {{"asset.table.category" | translate}}
                                                    <span ng-show="sortType == 'category' && !sortReverse"
                                                          class="fa fa-caret-down"></span>
                                                    <span ng-show="sortType == 'category' && sortReverse"
                                                          class="fa fa-caret-up"></span>
                                                </a>
                                            </th>
                                            <!--Resource-->
                                            <th width="10%" class="text-center text-uppercase">
                                                <a class="text text-primary">
                                                    {{"asset.table.passengers" | translate}}
                                                </a>
                                            </th>
                                            <!--Parking Lot-->
                                            <!--      <th width="5%" class="text-center text-uppercase">
                                            <a class="text text-primary" style="cursor:n-resize">
                                            {{"asset.table.parking_lot" | translate}}
                                            </a>
                                            </th>-->
                                            <!--Passenger Cap-->
                                            <th width="4%" class="text-center text-uppercase">
                                                <a class="text text-primary" style="cursor:n-resize"
                                                   ng-click="sortType = 'passenger_cap'; sortReverse = !sortReverse">
                                                    {{"asset.table.passenger_cap" | translate}}
                                                    <span ng-show="sortType == 'passenger_cap' && !sortReverse"
                                                          class="fa fa-caret-down"></span>
                                                    <span ng-show="sortType == 'passenger_cap' && sortReverse"
                                                          class="fa fa-caret-up"></span>
                                                </a>
                                            </th>
                                            <!--Status-->
                                            <th width="4%" class="text-center text-uppercase" width="3%">
                                                <a class="text text-primary" style="cursor:n-resize"
                                                   ng-click="sortType = 'status'; sortReverse = !sortReverse">
                                                    {{"asset.table.status" | translate}} <span
                                                        ng-show="sortType == 'status' && !sortReverse"
                                                        class="fa fa-caret-down"></span>
                                                    <span ng-show="sortType == 'status' && sortReverse"
                                                          class="fa fa-caret-up"></span>
                                                </a>
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="assetsvehicle in assets_vehicles | orderBy:sortType:sortReverse | filter:searchItem">
                                            <!--Plate-->
                                            <td>
                                                <a ng-if="!assetsvehicle.description" href=""
                                                   ui-sref="admin.viewAssetsVehicle({id:assetsvehicle.id})"
                                                   data-placement="bottom"
                                                   data-toggle="popover"
                                                   title=""
                                                   data-content="{{'app.shared.common.no_description' | translate}}"
                                                   data-trigger="hover">{{assetsvehicle.plate}}
                                                </a>
                                                <a ng-if="assetsvehicle.description" href=""
                                                   ui-sref="admin.viewAssetsVehicle({id:assetsvehicle.id})"
                                                   data-placement="bottom"
                                                   data-toggle="popover"
                                                   title=""
                                                   data-content="{{assetsvehicle.description}}"
                                                   data-trigger="hover">{{assetsvehicle.plate}}
                                                </a>
                                            </td>
                                            <!--Model-->
                                            <td>
                                                {{assetsvehicle.model}}
                                            </td>
                                            <!--DEFAULT POINT OF INT-->
                                            <td>
                                                <a class="btn btn-circle btn-default"
                                                   ui-sref="admin.viewPoint({id:assetsvehicle.default_point_of_interest})"
                                                   show-if-has-permit="view_point">
                                                    <i class="glyphicon glyphicon-map-marker"></i>
                                                </a>
                                            </td>
                                            <!--Organization-->
                                            <td class="">
                                                <a href="" data-target="#"
                                                   ui-sref="admin.viewOrganization({id:assetsvehicle.organization_id})">{{assetsvehicle.organization_name}}</a>
                                            </td>
                                            <!--Category-->
                                            <td>
                                                {{assetsvehicle.assets_category_name}}
                                            </td>
                                            <!--Passangers-->
                                            <td class="text-center noellipsis">
                                            </td>
                                            <!--Parking Lot-->
                                            <!--
                                            <td class="">{{assetsvehicle.night_parking_lot}}</td>
                                            -->
                                            <!--Passenger Cap-->
                                            <td class="text-center">
                                                {{assetsvehicle.passenger_cap}}
                                            </td>
                                            <!--Status-->
                                            <td class="text-center switch">
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div scroll-glue class="tab-pane fade" id="tab3default">
                                    <table class="table table-striped table-hover ellipsis-table table-responsive">
                                        <thead class="thead-default">
                                        <tr>
                                            <!--<th class="text-center text-uppercase text-primary"><i-->
                                            <!--class="glyphicon glyphicon-picture"></i></th>-->
                                            <th width="10%" class="text-uppercase">
                                                <a class="text text-primary" style="cursor:n-resize"
                                                   ng-click="sortType = 'lastname'; sortReverse = !sortReverse">
                                                    {{"asset.table.name" | translate}} <span
                                                        ng-show="sortType == 'lastname' && !sortReverse"
                                                        class="fa fa-caret-down"></span>
                                                    <span ng-show="sortType == 'lastname' && sortReverse"
                                                          class="fa fa-caret-up"></span>
                                                </a>
                                            </th>
                                            <th width="5%" class="text-uppercase">
                                                <a class="text text-primary" style="cursor:n-resize"
                                                   ng-click="sortType = 'assets_category_name'; sortReverse = !sortReverse">
                                                    {{"asset.table.category" | translate}} <span
                                                        ng-show="sortType == 'assets_category_name' && !sortReverse"
                                                        class="fa fa-caret-down"></span>
                                                    <span ng-show="sortType == 'assets_category_name' && sortReverse"
                                                          class="fa fa-caret-up"></span>
                                                </a>
                                            </th>
                                            <th width="7%" class="text-uppercase">
                                                <a class="text text-primary" style="cursor:n-resize"
                                                   ng-click="sortType = 'organization'; sortReverse = !sortReverse">
                                                    {{"asset.table.organization" | translate}} <span
                                                        ng-show="sortType == 'organization' && !sortReverse"
                                                        class="fa fa-caret-down"></span>
                                                    <span ng-show="sortType == 'organization' && sortReverse"
                                                          class="fa fa-caret-up"></span>
                                                </a>
                                            </th>
                                            <th width="10%" class="text-uppercase">
                                                <a class="text text-primary" style="cursor:n-resize"
                                                   ng-click="sortType = 'resource'; sortReverse = !sortReverse">
                                                    {{"asset.table.resource" | translate}} <span
                                                        ng-show="sortType == 'resource' && !sortReverse"
                                                        class="fa fa-caret-down"></span>
                                                    <span ng-show="sortType == 'resource' && sortReverse"
                                                          class="fa fa-caret-up"></span>
                                                </a>
                                            </th>
                                            <th width="2%" class="text-uppercase">
                                                <a class="text text-primary" style="cursor:n-resize"
                                                   ng-click="sortType = 'default_point_of_interest'; sortReverse = !sortReverse">
                                                    {{"app.shared.common.current_position" | translate}} <span
                                                        ng-show="sortType == 'default_point_of_interest' && !sortReverse"
                                                        class="fa fa-caret-down"></span>
                                                    <span ng-show="sortType == 'default_point_of_interest' && sortReverse"
                                                          class="fa fa-caret-up"></span>
                                                </a>
                                            </th>
                                            <th width="4%" class="text-center text-uppercase">
                                                <a class="text text-primary" style="cursor:n-resize"
                                                   ng-click="sortType = 'status'; sortReverse = !sortReverse">
                                                    {{"asset.table.status" | translate}} <span
                                                        ng-show="sortType == 'status' && !sortReverse"
                                                        class="fa fa-caret-down"></span>
                                                    <span ng-show="sortType == 'status' && sortReverse"
                                                          class="fa fa-caret-up"></span>
                                                </a>
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="assetsperson in assets_persons | orderBy:sortType:sortReverse | filter:searchItem ">
                                            <!--<td class="">-->
                                            <!--<a href="" data-target="#"-->
                                            <!--ui-sref="admin.viewAssetsPerson({id:assetsperson.assets_person_id})"></a>-->
                                            <!--</td>-->
                                            <!--Name-->
                                            <td>
                                                <a href=""
                                                   ui-sref="admin.viewAssetsPerson({id:assetsperson.assets_person_id})"
                                                   data-placement="bottom"
                                                   data-toggle="popover"
                                                   title=""
                                                   data-content="{{assetsperson.firstname}} {{assetsperson.lastname}}"
                                                   data-trigger="hover"> {{assetsperson.firstname}}
                                                    {{assetsperson.lastname}}
                                                </a>
                                            </td>
                                            <!--Category name-->
                                            <td data-title="Group">
                                                {{assetsperson.assets_category_name}}
                                            </td>
                                            <!--Organization name-->
                                            <td>
                                                <a show-if-has-permit="view_organization"
                                                   ui-sref="admin.viewOrganization({id:assetsperson.organization_id})">
                                                    {{assetsperson.organization_name}}
                                                </a>
                                            </td>
                                            <!--Resources-->
                                            <td class="text-center">
                                                <div class="dropdown">
                                                    <button ng-show="assetsperson.assets_resources.length>0"
                                                            data-toggle="dropdown"
                                                            class="btn btn-default btn-sm has-ripple btn-block"
                                                            value="glyphicon-arrow-down"
                                                            title="glyphicon-arrow-down">
                                                        <i class="glyphicon glyphicon-arrow-down"></i>
                                                        <span class="ripple ripple-animate"></span>
                                                    </button>
                                                    <ul class="dropdown-menu text-center list-group" role="menu"
                                                        style="background-color:transparent"
                                                        ng-show="assetsperson.assets_resources.length>0">
                                                        <a show-if-has-permit="view_assetsresource"
                                                           ui-sref="admin.viewAssetsResource({id:assets_resource.id})">
                                                            <li class="list-group-item list-group-item-text list-group-item-danger"
                                                                ng-repeat="assets_resource in assetsperson.assets_resources">
                                                                <div class="form-group">
                                                                    <label class="text black"> {{"asset.table.category"
                                                                        |translate}}:</label>
                                                                    <span class="text text-primary text-small">{{assets_resource.assets_category_name}}</span>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="text black">{{"asset.table.imei" |
                                                                        translate}}:</label>
                                                                    <span class="text text-primary text-small">{{assets_resource.imei}}</span>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="text black">{{"app.shared.common.serial"
                                                                        |
                                                                        translate}}:</label>
                                                                    <span class="text text-primary text-small">{{assets_resource.serial}}</span>
                                                                </div>
                                                            </li>
                                                        </a>
                                                    </ul>
                                                    <span class="text text-warning"
                                                          ng-show="assetsperson.assets_resources.length==0">{{"app.shared.common.no_resources" | translate}}</span>
                                                </div>
                                            </td>
                                            <!--DEFAULT POINT OF INT-->
                                            <td class="text-center">
                                                <a class="btn btn-circle btn-default"
                                                   ui-sref="admin.viewPoint({id:assetsperson.default_point_of_interest})"
                                                   show-if-has-permit="view_point"><i
                                                        class="glyphicon glyphicon-map-marker"></i>
                                                </a>
                                            </td>
                                            <!--Statu-->
                                            <td class="text-center switch">
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="tab-pane fade" id="tab4default">Events</div>
                            </div>
                        </div>
                    </div><!-- end panel -->
                </div><!-- end .col-md-12 -->
            </div>
        </div>
    </div>
    <!--DASHBOARD ON MAP-->
    <div id="panel">
        <div class="panel with-nav-tabs panel-primary">
            <h3 class="text-info"><strong>Dashboard</strong></h3>
            <div class="form-group inner-addon right-addon search-places">
                <i class="glyphicon glyphicon-search"></i>
                <input places-auto-complete
                       type="text"
                       class="form-control avl-search"
                       size="30"
                       types="{{types}}"
                       on-place-changed="placeChanged()"
                       placeholder="{{'app.shared.common.search_place' | translate}}"
                       value="{{place.name}}"/>
            </div>
            <div class="col-lg-l2">
                <!--Organization Dropdown-->
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12" show-if-has-permit="view_avls_for_administrators"
                     ng-dropdown-multiselect=""
                     search-filter="filterOrganization"
                     options="organizations"
                     selected-model="selectedOrganizations"
                     extra-settings="organizationSettings"
                     translation-texts="organizationSettings"
                     events="organizationEvents">
                </div>
                <!--Vehicles Dropdown-->
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12" ng-dropdown-multiselect=""
                     search-filter="customFilter"
                     options="assets_vehicles"
                     selected-model="selectedVehicles"
                     extra-settings="vehicleSettings"
                     translation-texts="assetsVehicles"
                     events="vehicleEvents"
                     group-by="category"
                ></div>
                <!--Persons Dropdown-->
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12" ng-dropdown-multiselect=""
                     search-filter="customFilter"
                     options="assets_persons"
                     selected-model="selectedPersons"
                     extra-settings="personSettings"
                     translation-texts="assetsPersons"
                     events="personEvents"
                     group-by="category"
                ></div>
                <!--Assets Category Dropdown-->
                <!--<div class="col-lg-l2" show-if-has-permit="view_assetscategory" ng-dropdown-multiselect=""-->
                <!--search-filter="customFilter" options="assets_categories"-->
                <!--selected-model="selectedAssets" extra-settings="assetsSettings"-->
                <!--translation-texts="assetsSettings"-->
                <!--group-by="category"></div>-->
                <div class="col-lg-12" style="padding-top:5%;font-family: cursive">
                    <div ng-repeat="item in checkboxes_params"
                         class="checkbox checkbox-info checkbox-inline"
                         id="{{item.name}}">
                        <input name='obj1.selected' type="checkbox"
                               id="{{item.id}}"
                               ng-model="checkboxes_params[$index].selected" ng-true-value="1" ng-false-value="0">
                        <label for="{{item.id}}" class="h5"><strong>{{item.label}}</strong></label>
                    </div>
                </div>
            </div>
        </div>
        <div id="controls">
            <!--BOOTSTRAP CUSTOM RANGE-->
            <div class="col-lg-12" style="padding-top:5%"
                 ng-if="selectedPersons.length>0 && selectedOrganizations.length>0 ||
                           selectedVehicles.length>0 && selectedOrganizations.length>0">
                <div class="inner-addon right-addon">
                    <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>
                    <input
                            date-range-picker id="daterange3" name="daterange3"
                            class="form-control date-picker"
                            style="cursor: pointer"
                            type="text" size="35"
                            ng-model="datePicker.date" options="dateRangeOptions" required/>

                </div>
            </div>
            <div class="col-lg-12" style="padding-top:5%;padding-bottom:5%">
                <a ng-click="runQuery()"
                   class="btn btn-block btn-default btn-success">
                    <i class="fa fa-paper-plane fa-1x"></i>
                    <!--
                                            <i class="fa fa-circle-o-notch fa-spin fa-1x fa-fw"></i>
                    -->
                </a>
            </div>
            <div class="block">
                <!--<div class="col-lg-12" style="padding-top:5%;padding-bottom:5%">-->
                <!--<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">-->
                <!--<ul class="nav navbar-nav navbar-right">-->
                <!--&lt;!&ndash;NOTIFICATION  notification&ndash;&gt;-->
                <!--&lt;!&ndash;PROFILE&ndash;&gt;-->
                <!--<li class="dropdown">-->
                <!--<a href="" class="pills-tables-btn text-uppercase" data-target="#"-->
                <!--data-toggle="dropdown">-->
                <!--<i class="fa fa-chevron-circle-down"></i>-->
                <!--</a>-->
                <!--<ul class="dropdown-menu multi-level" role="menu">-->
                <!--<li><a href="" data-target="#tab2default" data-toggle="tab">-->
                <!--<i class="fa fa-bus success"></i>-->
                <!--Vehicles-->
                <!--</a></li>-->
                <!--<li></li>-->
                <!--<li><a href="" data-target="#tab3default" data-toggle="tab">-->
                <!--<i class="fa fa-user success"></i>-->
                <!--Persons-->
                <!--</a>-->
                <!--</li>-->
                <!--<li></li>-->
                <!--<li class="active">-->
                <!--<a href="" data-target="#tab1default" _target="" data-toggle="tab">-->
                <!--<span class="fa fa-list"></span>-->
                <!--Charts-->
                <!--</a>-->
                <!--</li>-->
                <!--<li>-->
                <!--<a href="" data-target="#tab4default" _target="" data-toggle="tab">-->
                <!--<span class="badge badge-danger">4</span>-->
                <!--Events-->
                <!--</a>-->
                <!--</li>-->
                <!--</ul>-->
                <!--</li>-->
                <!--</ul>-->
                <!--</div>-->
                <!--</div>-->
            </div>
            <div>
                <div class="block">
                </div>
                <div id="legend">
                </div>
                <div>
                </div>
            </div>
        </div>
    </div>
    <!--MAP-->
    <div class="panel-body">
        <div style="max-width:100%;height:700px;">
            <ng-map default-style="true" center="[4.70,-74.11]" zoom="12">
            </ng-map>
        </div>
    </div>
</div>

<style>

    #markerLayer img {
        -webkit-border-radius: 50px;
        border-radius: 50px;
        animation: border-pulsate 2s ease-out;
        -webkit-animation: border-pulsate 2s ease-out;
        -webkit-animation-iteration-count: infinite;
        border: 3px solid #94ff74 !important;
    }

    @keyframes border-pulsate {
        0% {
            border-color: rgba(200, 11, 0, 0);
            /*-webkit-transform: scale(1.0, 1.0);*/
        }
        50% {
            border-color: rgba(200, 11, 0, 0.5);
            /*-webkit-transform: scale(0.9, 0.9);*/

        }
        100% {
            border-color: rgba(200, 11, 0, 0);
            /*-webkit-transform: scale(1.0, 1.0);*/
        }
    }


</style>
<script>

    $(function () {
        $(".drag-me").draggable();
    });
    //Load the control panel in a floating div if it is not loaded in an iframe
    //after the textarea has been rendered
    $("#coords").ready(function () {
        if (!window.frameElement) {
            $('#panel').addClass("floating panel");
            $('#button-div').addClass("button-div");
            $('#coords').removeClass("coords-large").addClass("coords-small");
            $('#toggle').show();
            $('#map').height('100%');
        }
    });

    $('#toggle').click(function (e) {
        if ($('#panel').css("display") != 'none') {
            $('#toggle').html("+");
            $('#panel').hide("scale", {origin: ["top", "right"]});
        } else {
            $('#toggle').html("&mdash;");
            $('#panel').show("scale", {origin: ["top", "right"]});
        }
    });
</script>


